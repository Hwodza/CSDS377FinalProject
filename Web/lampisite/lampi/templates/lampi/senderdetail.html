{% extends "lampi/base.html" %}

{% extends 'base.html' %}

{% block content %}
<div class="container">
    <h2 class="my-4">{{ device.name }} - Device Dashboard</h2>
    
    <!-- Compact Current Stats Section -->
    <div class="card mb-4">
        <div class="card-header">
            <h5 class="mb-0">Current System Status</h5>
        </div>
        <div class="card-body py-2">
            {% if current_stats %}
            <div class="d-flex flex-wrap align-items-center justify-content-between">
                <!-- Memory Stats -->
                <div class="me-3 mb-1">
                    <span class="fw-bold">Memory:</span>
                    <span class="text-success">{{ current_stats.kbmemfree|floatformat:"0" }}K free</span>
                    <span class="text-danger">{{ current_stats.memused_percent|floatformat:"1" }}% used</span>
                </div>
                
                <!-- CPU Stats -->
                <div class="me-3 mb-1">
                    <span class="fw-bold">CPU:</span>
                    <span class="text-danger">{{ current_stats.cputemp|floatformat:"1" }}°C</span>
                    <span class="text-primary">
                        {% for core in chart_data.cpu_loads %}
                        C{{ core.core }}:{{ core.load|floatformat:"1" }}{% if not forloop.last %}, {% endif %}
                        {% endfor %}
                    </span>
                </div>
                
                <!-- Disk Stats -->
                <div class="me-3 mb-1">
                    <span class="fw-bold">Disks:</span>
                    {% for disk in chart_data.disk_stats %}
                    <span>{{ disk.device }}:{{ disk.util|floatformat:"1" }}%</span>
                    {% if not forloop.last %}, {% endif %}
                    {% endfor %}
                </div>
                
                <!-- Network Stats -->
                <div class="me-3 mb-1">
                    <span class="fw-bold">Network:</span>
                    {% for net in chart_data.network_stats %}
                    <span>{{ net.iface }}:▼{{ net.rx_kb|floatformat:"1" }}K/▲{{ net.tx_kb|floatformat:"1" }}K</span>
                    {% if not forloop.last %}, {% endif %}
                    {% endfor %}
                </div>
                
                <!-- Timestamp -->
                <div class="text-muted small">
                    Updated: {{ current_stats.timestamp|timesince }} ago
                </div>
            </div>
            {% else %}
            <div class="alert alert-warning py-1 px-2 mb-0">No statistics available</div>
            {% endif %}
        </div>
    </div>
    
    <!-- Rest of your template (charts section) remains the same -->
    <div class="card mb-4">
        <div class="card-header">
            <h3>Performance History (Last 24 Hours)</h3>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6">
                    <div class="chart-container">
                        <h4>Memory Usage</h4>
                        <canvas id="memoryChart"></canvas>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="chart-container">
                        <h4>CPU Temperature</h4>
                        <canvas id="cpuTempChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Chart.js and other scripts remain the same -->
{% endblock %}

<style>
/* Compact styles */
.card-header h5 {
    font-size: 1.1rem;
}
.card-body {
    padding: 0.5rem 1rem;
}
.fw-bold {
    font-weight: 600;
}
.text-success {
    color: #28a745;
}
.text-danger {
    color: #dc3545;
}
.text-primary {
    color: #007bff;
}
.small {
    font-size: 0.85rem;
}
</style>

{% block page_event %}LAMPI List{% endblock %}
